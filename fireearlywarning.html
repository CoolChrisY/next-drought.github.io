<!DOCTYPE html>
<html>

<a title="GDPR-compliant Web Analytics" href="https://clicky.com/101398452"><img alt="Clicky" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script async src="//static.getclicky.com/101398452.js"></script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/101398452ns.gif" /></p></noscript>

<head>
    <meta charset="UTF-8">
    <title>Temperature and Fire Risk Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 900px;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script>
        $(document).ready(function () {

            var osm = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
                attribution: '© OpenStreetMap'
            });

            var arcgisUrl = 'https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/NDFD_DailyTemperature_v1/FeatureServer';
            var arcgis = L.tileLayer(arcgisUrl, { attribution: '© ArcGIS' });

            var cities = L.layerGroup();
            L.marker([39.61, -105.02]).bindPopup('This is Littleton, CO.').addTo(cities);
            L.marker([39.74, -104.99]).bindPopup('This is Denver, CO.').addTo(cities);
            L.marker([39.73, -104.8]).bindPopup('This is Aurora, CO.').addTo(cities);
            L.marker([39.77, -105.23]).bindPopup('This is Golden, CO.').addTo(cities);

            var maxarUrl = 'https://raw.githubusercontent.com/next-drought/next-drought.github.io/main/maxar_footprints.geojson';
            var maxar = $.getJSON(maxarUrl, function (data) {
                var geojson = L.geoJson(data, {
                    style: function (feature) {
                        return { color: "#ff0000" };
                    },
                    onEachFeature: function (feature, layer) {
                        layer.bindPopup(feature.properties.dateAcquired);
                    }
                });
                layerControl.addOverlay(geojson, "Maxar Footprints");
                geojson.addTo(map);
            });

            var map = L.map('map', {
                center: [36.844461, 37.386475],
                zoom: 8,
                layers: [osm, cities]
            });

            var baseMaps = {
                "OpenStreetMap": osm,
                "ArcGIS": arcgis
            };

            var overlayMaps = {
                "Cities": cities
            };

            var layerControl = L.control.layers(baseMaps, overlayMaps).addTo(map);

            var crownHill = L.marker([39.75, -105.09]).bindPopup('This is Crown Hill Park.');
            var rubyHill = L.marker([39.68, -105.00]).bindPopup('This is Ruby Hill Park.');
            var parks = L.layerGroup([crownHill, rubyHill]);
            //var satellite = L.tileLayer(mapboxUrl, { id: 'mapbox/satellite-v9', tileSize: 512, zoomOffset: -1, attribution: '© Mapbox' });
            var satellite = L.tileLayer("https://mt1.google.com/vt/lyrs=y\u0026x={x}\u0026y={y}\u0026z={z}", {
                "attribution": "Google",
                "detectRetina": false,
                "maxNativeZoom": 22,
                "maxZoom": 22,
                "minZoom": 0,
                "noWrap": false,
                "opacity": 1,
                "subdomains": "abc",
                "tms": false
                });
            layerControl.addBaseLayer(satellite, "Satellite");
            layerControl.addOverlay(parks, "Parks");
        });
    </script>
</body>

</html>
